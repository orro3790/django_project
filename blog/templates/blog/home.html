{% extends "blog/base.html" %}
{% block nav_item_home %}active{% endblock nav_item_home %} 
{% block content %}
{% load static %}

<!-- SHOWCASE SLIDER -->
<section id="carousel-section">
  <div class="container p-0 mt-0 d-none d-lg-block">
    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
          <div class="carousel-item active">
            {% for carousel in carousel %}
              {% if carousel.slide_number == 'First' %}
                <a href="{{ carousel.link }}" class="stretched-link">
                <div class="container">
                  <img class="d-block w-100" src="{{ carousel.image.url }}" alt="First slide">
                  <div class="carousel-caption carousel-caption-1">
                    <h4 class="display-4">{{ carousel.title }}</h4>
                    <p class="lead">
                      {{ carousel.caption }}
                    </p>
                  </div>
                </div>
                </a>
              {% endif %}
            {% endfor %}
          </div>
          <div class="carousel-item">
            {% for carousel in carousel %}
              {% if carousel.slide_number == 'Second' %}
                <a href="{{ carousel.link }}" class="stretched-link">
                <div class="container">
                  <img class="d-block w-100" src="{{ carousel.image.url }}" alt="First slide">
                  <div class="carousel-caption carousel-caption-2">
                    <h4 class="display-4">{{ carousel.title }}</h4>
                    <p class="lead">
                      {{ carousel.caption }}
                    </p>
                  </div>
                </div>
                </a>
              {% endif %}
            {% endfor %}
          </div>
          <div class="carousel-item">
            {% for carousel in carousel %}
              {% if carousel.slide_number == 'Third' %}
                <a href="{{ carousel.link }}" class="stretched-link">
                <div class="container">
                  <img class="d-block w-100" src="{{ carousel.image.url }}" alt="First slide">
                  <div class="carousel-caption carousel-caption-3">
                    <h4 class="display-4">{{ carousel.title }}</h4>
                    <p class="lead">
                      {{ carousel.caption }}
                    </p>
                  </div>
                </div>
                </a>
              {% endif %}
            {% endfor %}
          </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
    </div>
  </div>
  <!-- Mobile view -->
  <div class="container p-0 mt-0 d-lg-none d-sm-block">
    <div id="carouselExampleIndicatorsMobile" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carouselExampleIndicatorsMobile" data-slide-to="0" class="active"></li>
          <li data-target="#carouselExampleIndicatorsMobile" data-slide-to="1"></li>
          <li data-target="#carouselExampleIndicatorsMobile" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
          <div class="carousel-item active">
            {% for carousel in carousel %}
              {% if carousel.slide_number == 'First' %}
                <a href="{{ carousel.link }}" class="stretched-link">
                <div class="container">
                  <img class="d-block w-100" src="{{ carousel.mobile_image.url }}">
                  <div class="carousel-caption carousel-caption-1">
                    <h4 class="display-4" style="font-size: 26px;">{{ carousel.title }}</h4>
                    <p class="lead" style="font-size: 20x;">
                      {{ carousel.caption }}
                    </p>
                  </div>
                </div>
                </a>
              {% endif %}
            {% endfor %}
          </div>
          <div class="carousel-item">
            {% for carousel in carousel %}
              {% if carousel.slide_number == 'Second' %}
                <a href="{{ carousel.link }}" class="stretched-link">
                <div class="container">
                  <img class="d-block w-100" src="{{ carousel.mobile_image.url }}">
                  <div class="carousel-caption carousel-caption-2">
                    <h4 class="display-4" style="font-size: 26px;">{{ carousel.title }}</h4>
                    <p class="lead" style="font-size: 20px;">
                      {{ carousel.caption }}
                    </p>
                  </div>
                </div>
                </a>
              {% endif %}
            {% endfor %}
          </div>
          <div class="carousel-item">
            {% for carousel in carousel %}
              {% if carousel.slide_number == 'Third' %}
                <a href="{{ carousel.link }}" class="stretched-link">
                <div class="container">
                  <img class="d-block w-100" src="{{ carousel.mobile_image.url }}">
                  <div class="carousel-caption carousel-caption-3">
                    <h4 class="display-4" style="font-size: 26px;">{{ carousel.title }}</h4>
                    <p class="lead" style="font-size: 20px;">
                      {{ carousel.caption }}
                    </p>
                  </div>
                </div>
                </a>
              {% endif %}
            {% endfor %}
          </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicatorsMobile" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicatorsMobile" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
    </div>
  </div>
</section>


<!--HOME ICON SECTION  -->
<section id="home-icons" class="pt-3">
  <div class="container">
    <div class="row">
      <div class="col-sm-4 mb-4 text-center">
        <a href="{% url 'blog-search' %}" class="nav-link">
        <i class="fas fa-coffee fa-2x mb-2"></i>
        <h5>Cafés & Restaurants</h5>
        <p>Browse a variety of cafés, coffee houses, dessert cafés, and restaurants.</p>
        </a>
      </div>
      <div class="col-sm-4 mb-4 text-center">
        <a href="{% url 'blog-search' %}" class="nav-link">
        <i class="fas fa-star fa-2x mb-2"></i>
        <i class="fas fa-star fa-2x mb-2"></i>
        <i class="fas fa-star-half-alt fa-2x mb-2"></i>
        <h5>Search by Features</h5>
        <p>Click to Search destinations by ratings, nearest subway station, unique features, and more.</p>
        </a>
      </div>
      <div class="col-sm-4 mb-4 text-center">
        <a href="{% url 'blog-map' %}" class="nav-link">
        <i class="fas fa-map-marked-alt fa-2x mb-2"></i>
        <h5>View Locations</h5>
        <p>Every review contains a location pin. You can also click here to browse the Tasty Map.</p>
        </a>
      </div>
    </div>
  </div>
</section>

<!-- BLOG CARD SECTION -->
<section id="blog">
  <div class="container pb-5">
    <div class="card-columns">
      {% for post in posts %}
        <a href="{% url 'post-detail' post.id %}" class="card stretched-link my-4 card-hover">
        <img src="{{ post.card_image.url }}" alt="" class="card-img-top">
        <span class="badge badge-pill notify-badge badge-light">{{ post.store_type.get }}</span>
        <div class="card-body">
          <h4 class="card-title">{{ post.title }}</h4>
          {% if post.overall_rating.get.rating == 1 %}
          <span>Overall: 
            <i class="fas fa-star"></i>
            <i class="fas fa-star unfilled"></i>
          </span>
          {% elif post.overall_rating.get.rating == 1.5 %}
          <span>Overall: 
            <i class="fas fa-star"></i>
            <i class="fas fa-star-half-alt"></i>
            <i class="fas fa-star unfilled"></i>
            <i class="fas fa-star unfilled"></i>
            <i class="fas fa-star unfilled"></i>
          </span>
          {% elif post.overall_rating.get.rating == 2 %}
          <span>Overall: 
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star unfilled"></i>
            <i class="fas fa-star unfilled"></i>
            <i class="fas fa-star unfilled"></i>
          </span>
          {% elif post.overall_rating.get.rating == 2.5 %}
          <span>Overall: 
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star-half-alt"></i>
            <i class="fas fa-star unfilled"></i>
            <i class="fas fa-star unfilled"></i>
          </span>
          {% elif post.overall_rating.get.rating == 3 %}
          <span>Overall: 
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star unfilled"></i>
            <i class="fas fa-star unfilled"></i>
          </span>
          {% elif post.overall_rating.get.rating == 3.5 %}
          <span>Overall: 
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star-half-alt"></i>
            <i class="fas fa-star unfilled"></i>
          </span>
          {% elif post.overall_rating.get.rating == 4 %}
          <span>Overall: 
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star unfilled"></i>
          </span>
          {% elif post.overall_rating.get.rating == 4.5 %}
          <span>Overall: 
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star-half-alt"></i>
          </span>
          {% elif post.overall_rating.get.rating == 5 %}
          <span>Overall: 
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
          </span>
          {% endif %}
          <div>

          Price:
          {% if post.price_rating.get.name == "Cheap" %}
          <span>
            <i class="fas fa-ruble-sign"></i>
            <i class="fas fa-ruble-sign unfilled"></i>
            <i class="fas fa-ruble-sign unfilled"></i>
            <i class="fas fa-ruble-sign unfilled"></i>
          </span>
          {% elif post.price_rating.get.name == "Average" %}
          <span> 
            <i class="fas fa-ruble-sign"></i>
            <i class="fas fa-ruble-sign"></i>
            <i class="fas fa-ruble-sign unfilled"></i>
            <i class="fas fa-ruble-sign unfilled"></i>
          </span>
          {% elif post.price_rating.get.name == "Expensive" %}
          <span>
            <i class="fas fa-ruble-sign"></i>
            <i class="fas fa-ruble-sign"></i>
            <i class="fas fa-ruble-sign"></i>
            <i class="fas fa-ruble-sign unfilled"></i>
          </span>
          {% elif post.price_rating.get.name == "Very Expensive" %}
          <span>
            <i class="fas fa-ruble-sign"></i>
            <i class="fas fa-ruble-sign"></i>
            <i class="fas fa-ruble-sign"></i>
            <i class="fas fa-ruble-sign"></i>
          </span>
          {% endif %}
          <div></div>
          Nearest Station: <em>{{ post.nearest_station.get }}</em>
          </div>
          <div class="text-right pr-0">
            <i class="fas fa-comments"></i>
            <span>
              {{ post.comment_set.all.count }}
            </span>
          </div>
          <hr>
          <p class="card-text">{{ post.card_content }}</p>
          <hr>
          <footer class="blockquote-footer ">
            <cite title="Source Title">Posted on {{ post.date_posted|date:"F d, Y" }}</cite>
          </footer>
        </div>
        </a>
      {% endfor %}
    </div>
  </div>
</section>

{% if is_paginated %}
<section id="paginate-buttons">
<div class="container text-center pb-5">
  <div class="row">
    <div class="col">
      {% if page_obj.has_previous %}
        <a class="btn btn-outline-dark" href="?page=1"><i class="fas fa-angle-double-left"></i></a>
      {% endif %}

      {% for num in page_obj.paginator.page_range %}
        {% if page_obj.number == num %}
          <a class="btn btn-dark" href="?page={{ num }}">{{ num }}</a>
        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
          <a class="btn btn-outline-dark" href="?page={{ num }}">{{ num }}</a>
        {% endif %}
      {% endfor %}

      {% if page_obj.has_next %}
        <a class="btn btn-outline-dark" href="?page={{ page_obj.paginator.num_pages }}"><i class="fas fa-angle-double-right"></i></a>
      {% endif %}
    </div>
  </div>
</div>
</section>
{% endif %}


{% endblock content %}