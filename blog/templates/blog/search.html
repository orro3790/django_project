{% extends "blog/base.html" %}
{% block nav_item_blog-search %}active{% endblock nav_item_blog-search %} 
{% load crispy_forms_tags %}
{% block content %}
{% load static %}
{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}

{% trans "We're two Canadians living and working in Moscow. Learn about life in Moscow along with us by following our weekly blogs!" as meta_tag %}

<head>
  <meta name="description" CONTENT={{meta_tag}}>
</head>

<!-- Masonry -->
<script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script src="/django_project/blog/static/blog/js/masonry.pkgd.min.js"></script>

<section id="carousel-section">
  <div class="container-fluid px-0">
    <div id="foodsearch-banner" class="carousel slide carousel-fade" data-ride="carousel">
      <ol class="carousel-indicators d-none">
          <li data-target="#foodsearch-banner" data-slide-to="0" class="active"></li>
          <li data-target="#foodsearch-banner" data-slide-to="1"></li>
          <li data-target="#foodsearch-banner" data-slide-to="2"></li>
        </ol>
      <div class="carousel-inner">
          <div class="carousel-item active">
            {% for image in carousel_images %}
              {% if image.slide_number == 'First' %}
                {% if LANGUAGE_CODE == 'en' %}
                  <a href="{{ image.link }}" class="stretched-link">
                    <img class="d-block w-100" src="{{ image.image.url }}" alt="First slide">
                    <div class="carousel-caption carousel-caption-center d-lg-block d-none">
                      <h4>
                        {{ image.title }}
                      </h4>
                      <p>
                        {{ image.caption }}
                      </p>
                    </div>
                  </a>
                {% elif LANGUAGE_CODE == 'ru' %}
                  <a href="{{ image.link_russian }}" class="stretched-link">
                    <img class="d-block w-100" src="{{ image.image.url }}" alt="First slide">
                    <div class="carousel-caption carousel-caption-center d-lg-block d-none">
                      <h4>
                        {{ image.title_russian }}
                      </h4>
                      <p>
                        {{ image.caption_russian }}
                      </p>
                    </div>
                  </a>
                {% endif %}
              {% endif %}
            {% endfor %}
          </div>
          <div class="carousel-item">
            {% for image in carousel_images %}
              {% if image.slide_number == 'Second' %}
                {% if LANGUAGE_CODE == 'en' %}
                  <a href="{{ image.link }}" class="stretched-link">
                    <img class="d-block w-100" src="{{ image.image.url }}" alt="First slide">
                    <div class="carousel-caption carousel-caption-center d-lg-block d-none">
                      <h4>
                        {{ image.title }}
                      </h4>
                      <p>
                        {{ image.caption }}
                      </p>
                    </div>
                  </a>
                {% elif LANGUAGE_CODE == 'ru' %}
                  <a href="{{ image.link_russian }}" class="stretched-link">
                    <img class="d-block w-100" src="{{ image.image.url }}" alt="First slide">
                    <div class="carousel-caption carousel-caption-center d-lg-block d-none">
                      <h4>
                        {{ image.title_russian }}
                      </h4>
                      <p>
                        {{ image.caption_russian }}
                      </p>
                    </div>
                  </a>
                {% endif %}
              {% endif %}
            {% endfor %}
          </div>
          <div class="carousel-item">
            {% for image in carousel_images %}
              {% if image.slide_number == 'Third' %}
                {% if LANGUAGE_CODE == 'en' %}
                  <a href="{{ image.link }}" class="stretched-link">
                    <img class="d-block w-100" src="{{ image.image.url }}" alt="First slide">
                    <div class="carousel-caption carousel-caption-center d-lg-block d-none">
                      <h4>
                        {{ image.title }}
                      </h4>
                      <p>
                        {{ image.caption }}
                      </p>
                    </div>
                  </a>
                {% elif LANGUAGE_CODE == 'ru' %}
                  <a href="{{ image.link_russian }}" class="stretched-link">
                    <img class="d-block w-100" src="{{ image.image.url }}" alt="First slide">
                    <div class="carousel-caption carousel-caption-center d-lg-block d-none">
                      <h4>
                        {{ image.title_russian }}
                      </h4>
                      <p>
                        {{ image.caption_russian }}
                      </p>
                    </div>
                  </a>
                {% endif %}
              {% endif %}
            {% endfor %}
          </div>
        </div>
      <a class="carousel-control-prev d-none" href="#foodsearch-banner" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next d-none" href="#foodsearch-banner" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
      </a>
    </div>
  </div>
</section>

<!-- Search by store type-->
<section id="search-fields">
<div class="w-100 search-sec d-md-block d-none">
  <form method="GET" action=".">
    <div class="container">
      <!-- Search by store type -->
      <div class="row">
        <div class="col-md-1"></div>
          <div class="col-md-2 my-auto">
              <select id="store_type" class="custom-select custom-select-sm custom-select custom-select-sm-sm" name="store_type">
                <option selected>
                  {% if store_type_query %}
                    {{ store_type_query }}
                  {% else %}
                    {% trans "Type..." %}
                  {% endif %}
                </option>
                {% if LANGUAGE_CODE == 'en' %}
                  {% for type in store_type %}
                    <option value="{{ type }}"> {{ type }} </option>
                  {% endfor %}
                {% elif LANGUAGE_CODE == 'ru' %}
                  {% for type in store_type_russian %}
                    <option value="{{ type }}"> {{ type }} </option>
                  {% endfor %}
                {% endif %}
              </select>
          </div>
          <!-- Search by special feature -->
          <div class="col-md-2 my-auto">
            <select id="special_feature" class="custom-select custom-select-sm" name="special_feature">
              <option selected>
                {% if special_feature_query %}
                  {{ special_feature_query }}
                {% else %}
                  {% trans "Features..." %}
                {% endif %}
              </option>
              {% if LANGUAGE_CODE == 'en' %}
                {% for feature in special_feature %}
                  <option value="{{ feature }}"> {{ feature }} </option>
                {% endfor %}
              {% elif LANGUAGE_CODE == 'ru' %}
                {% for feature in special_feature_russian %}
                  <option value="{{ feature }}"> {{ feature }} </option>
                {% endfor %}
              {% endif %}
            </select>
          </div>
          <!-- Search by nearest station -->
          <div class="col-md-2 my-auto">
            <select id="nearest_station" class="custom-select custom-select-sm" name="nearest_station">
              <option selected>
                {% if nearest_station_query %}
                  {{ nearest_station_query }}
                {% else %}
                  {% trans "Station..." %}
                {% endif %}
              </option>
              {% if LANGUAGE_CODE == 'en' %}
                {% for station in nearest_station %}
                  <option value="{{ station }}"> {{ station }} </option>
                {% endfor %}
              {% elif LANGUAGE_CODE == 'ru' %}
                {% for station in nearest_station_russian %}
                  <option value="{{ station }}"> {{ station }} </option>
                {% endfor %}
              {% endif %}
            </select>
          </div>
          <!-- Search by price -->
          <div class="col-md-2 my-auto">
            <select id="price_rating" class="custom-select custom-select-sm" name="price_rating">
              <option selected>
                {% if price_rating_query %}
                  {{ price_rating_query }}
                {% else %}
                  {% trans "Price..." %}
                {% endif %}
              </option>
              {% if LANGUAGE_CODE == 'en' %}
                {% for rating in price_rating %}
                  <option value="{{ rating }}"> {{ rating }} </option>
                {% endfor %}
              {% elif LANGUAGE_CODE == 'ru' %}
                {% for rating in price_rating_russian %}
                  <option value="{{ rating }}"> {{ rating }} </option>
                {% endfor %}
              {% endif %}
            </select>
          </div>
          <!-- Search by overall rating -->
          <div class="col-md-2 my-auto">
            <select id="overall_rating" class="custom-select custom-select-sm" name="overall_rating">
              <option selected>
                {% if overall_rating_query %}
                  {{ overall_rating_query }}
                {% else %}
                  {% trans "Rating ≥ ..." %}
                {% endif %}
              </option>
              <option>1.0</option>
              <option>1.5</option>
              <option>2.0</option>
              <option>2.5</option>
              <option>3.0</option>
              <option>3.5</option>
              <option>4.0</option>
              <option>4.5</option>
              <option>5.0</option>
            </select>
          </div>
        <div class="col-md-1"></div>
      </div>

      <!-- New row for title, search, and reset buttons-->
      <div class="row pt-3">
        <div class="col-md-3">
          <!-- 3 empty cols -->
        </div>
        <div class="col-md-4 my-auto">
          <div class="input-group">
            <input class="form-control form-control-sm border-right-0 border" type="search" name="keyword" placeholder="{% trans "Keyword..." %}"/>
              <span class="input-group-append">
                <div class="input-group-text">
                  <i class="fa fa-search"></i>
                </div>
              </span> 
          </div>
        </div>
        <!-- Search Submit Button -->
        <div class="col-md-2 text-center my-auto">
          <button type="submit" class="btn btn-sm btn-dark" value="Filter">
            {% trans "Search" %}
          </button>
          <span class="pl-2">
            <a href="{% url 'blog-search' %}" class="btn btn-sm btn-danger justify-content-center" role="button">
              <i class="fas fa-history primary"></i>
            </a>
          </span>
        </div>
        <div class="col-md-3">
          <!-- 3 empty cols -->
        </div>
      </div>
    </div>
  </form>
</div>
</section>

<!-- Mobile View: Search Menu  -->
<!-- Search by store type-->
<form method="GET" action="." class="d-lg-none d-md-block">
<div class="container py-3">
  <div class="row">
    <div class="col-md-2">
      <div class="input-group">
        <input class="form-control form-control-sm border-right-0 border" type="search" name="keyword" placeholder="Keyword..." />
          <span class="input-group-append">
            <div class="input-group-text ">
              <i class="fa fa-search"></i>
            </div>
          </span> 
      </div>
    </div>
<!-- Search by store type -->
    <div class="col-md-2">
        <select id="store_type" class="custom-select custom-select-sm" name="store_type">
          <option selected>Type...</option>
          {% for type in store_type %}
            <option value="{{ type }}"> {{ type }} </option>
          {% endfor %}
        </select>
    </div>
    <!-- Search by special feature -->
    <div class="col-md-2">
        <select id="special_feature" class="custom-select custom-select-sm" name="special_feature">
          <option selected>Features...</option>
          {% for feature in special_feature %}
            <option value="{{ feature }}"> {{ feature }} </option>
          {% endfor %}
        </select>
    </div>
    <!-- Search by nearest station -->
    <div class="col-md-2">
        <select id="nearest_station" class="custom-select custom-select-sm" name="nearest_station">
          <option selected>Station...</option>
          {% for station in nearest_station %}
            <option value="{{ station }}"> {{ station }} </option>
          {% endfor %}
        </select>
    </div>
    <!-- Search by price -->
    <div class="col-md-2">
        <select id="price_rating" class="custom-select custom-select-sm" name="price_rating">
          <option selected>Price...</option>
          {% for rating in price_rating %}
            <option value="{{ rating }}"> {{ rating }} </option>
          {% endfor %}
        </select>
    </div>
    <!-- Search by overall rating -->
    <div class="col-md-2 pb-3">
        <select id="overall_rating" class="custom-select custom-select-sm" name="overall_rating">
          <option selected>Rating ≥ ...</option>
          {% for rating in overall_rating %}
            <option value="{{ rating }}"> {{ rating }} </option>
          {% endfor %}
        </select>
    </div>
    <!-- Search Submit Button -->
    <div class="col-12 text-center my-auto">
      <button type="submit" class="btn btn-sm btn-dark" value="Filter">
        {% trans "Search" %}
      </button>

      <span class="pl-2">
        <a href="{% url 'blog-search' %}" class="btn btn-sm btn-danger justify-content-center align-items-center" role="button">
          <i class="fas fa-history primary"></i>
        </a>
      </span>
    </div>
  </div>
</div>
</form>

<!-- ussian SearchR Results -->
<section id="search-results">
  {% if LANGUAGE_CODE == "ru" %}
    <!-- Outcome #1: Default view upon first page load -->
    {% if tags_query == None and blog_category_query == None and keyword_query == None %}
      <div class="container text-center">
        {% if queryset.paginator.count == 0 %}
          <b>
            (0) блогов:
          </b>
          <hr> 
        {% elif queryset.paginator.count == 1 %}
          <b>
            (1) блог:
          </b>
          <hr> 
        {% elif queryset.paginator.count|slice:":-1" == 2 or queryset.paginator.count|slice:":-1" == 3 or queryset.paginator.count|slice:":-1" == 4 %}
          <b>
            ({{queryset.paginator.count}}) блога:
          </b>
          <hr> 
        {% elif queryset.paginator.count > 5 or queryset.paginator.count|slice:"-1" == 5 %}
          <b>
            ({{queryset.paginator.count}}) блогов:
          </b>
          <hr>
        {% endif %}
      </div>

    <!-- Outcome #2: The user presses search without any specific criteria -->
    {% elif keyword_query == '' and store_type_query == "Тип..." and special_feature_query == "Характеристики..." and nearest_station_query == "Станция..." and price_rating_query == "Цена..." and overall_rating_query == "Рейтинг ≥ ..."%}
      <div class="container text-center">
        {% if queryset.paginator.count == 0 %}
          <b>
            (0) блогов:
          </b>
          <hr> 
        {% elif queryset.paginator.count == 1 %}
          <b>
            (1) блог:
          </b> 
          <hr>
        {% elif queryset.paginator.count|slice:"-1" == 2 or queryset.paginator.count|slice:":-1" == 3 or queryset.paginator.count|slice:":-1" == 4 %}
          <b>
            ({{queryset.paginator.count}}) блога:
          </b> 
          <hr>
        {% elif queryset.paginator.count > 5 or queryset.paginator.count|slice:":-1" == 5 %}
          <b>
            ({{queryset.paginator.count}}) блогов:
          </b> 
          <hr>
        {% endif %}
      </div>
    <!-- Outcome #3: A user searches with some combination of criteria selected-->
    {% else %}
      <div class="container text-center">
        {% if queryset.paginator.count == 1 %}
          <b>
            (1) блог:
          </b> 
          <hr>
        {% elif queryset.paginator.count|slice:"-1" == 2 or queryset.paginator.count|slice:":-1" == 3 or queryset.paginator.count|slice:":-1" == 4 %}
          <b>
            ({{queryset.paginator.count}}) блога:
          </b>
          <hr> 
        {% elif queryset.paginator.count > 5 or queryset.paginator.count|slice:":-1" == 5 %}
          <b>
            ({{queryset.paginator.count}}) блогов:
          </b>
          <hr>
        {% endif %}
      </div>
      
      <!-- If there are no results, show this additional container -->
      {% if queryset.paginator.count == 0 %}
        <div class="container text-center pt-3">
          <h5>
            {% trans "Looking for something? Tell us and we'll blog about it for you!" %}
          </h5>
        </div>
        <div class="row py-5">
          <div class="col-3 d-none d-md-block">
            <!-- empty spacing -->
          </div>
          <div class="col-md-3 col-6 text-center">
            <div>
              <img class="img-fluid rounded-circle" src="{% static 'blog/images/mandu.png' %}" style="width: 150px;">
            </div>
            <div class="d-flex justify-content-center py-2 text-right">
              <div class="p-1">
                <a href="https://www.twitter.com/whattheblin">
                  <i class="fab fa-twitter" style="font-size: 2rem;"></i>
                </a>
              </div>
              <div class="p-1">
                <a href="https://www.instagram.com/theblinmachine">
                  <i class="fab fa-instagram" style="font-size: 2rem;"></i>
                </a>
              </div>
            </div>
          </div>
          <div class="col-md-3 col-6 text-center">
            <div>
            <img class="img-fluid rounded-circle" src="{% static 'blog/images/StephYellow.png' %}" style="width: 150px;">
            </div>
            <div class="d-flex justify-content-center py-2 text-left">
              <div class="p-1">
                <a href="https://www.instagram.com/labelle44">
                  <i class="fab fa-instagram" style="font-size: 2rem;"></i>
                </a>
              </div>
            </div>
          </div>
          <div class="col-3 d-none d-md-block">
            <!-- empty spacing -->
          </div>
        </div>
      {% endif %}
    {% endif %}
  {% endif %}

  <!-- Search result text for ENGLISH users -->
  {% if LANGUAGE_CODE == "en" %}
    <!-- Search results text and criteria -->
    {% if keyword_query == None and store_type_query == None and special_feature_query == None and nearest_station_query == None and price_rating_query == None and overall_rating_query == None %}
      <div class="container text-center">
        {% if queryset.paginator.count == 0 %}
          <b>(0) Blogs</b>
        {% elif queryset.paginator.count == 1 %}
          <b>(1) Blog</b>
        {% elif queryset.paginator.count > 1 %}
          <b>({{ queryset.paginator.count }}) Blogs</b>
        {% endif %}
        <hr>
      </div>

    {% elif keyword_query == '' and store_type_query == "Type..." and special_feature_query == "Features..." and nearest_station_query == "Station..." and price_rating_query == "Price..." and overall_rating_query == "Rating ≥ ..." %}
      <div class="container text-center">
        {% if queryset.paginator.count == 0 %}
          <b>(0) Blogs</b>
        {% elif queryset.paginator.count == 1 %}
          <b>(1) Blog</b>
        {% elif queryset.paginator.count > 1 %}
          <b>({{ queryset.paginator.count }}) Blogs</b>
        {% endif %}
        <hr>
      </div>

    {% else %}
      <div class="container text-center">
        {% if queryset.paginator.count == 0 %}
          <b>(0) Blogs</b>
        {% elif queryset.paginator.count == 1 %}
          <b>(1) Blog</b>
        {% elif queryset.paginator.count > 1 %}
          <b>({{ queryset.paginator.count }}) Blogs</b>
        {% endif %}
        <hr>
      </div>
    {% endif %}

    <!-- If there are no results, show this additional container -->
    {% if queryset.paginator.count == 0 %}
      <div class="container text-center pt-3">
        <h5>
          {% trans "Looking for something? Tell us and we'll blog about it for you!" %}
        </h5>
      </div>
      <div class="row py-5">
        <div class="col-3 d-none d-md-block">
          <!-- empty spacing -->
        </div>
        <div class="col-md-3 col-6 text-center">
          <div>
            <img class="img-fluid rounded-circle" src="{% static 'blog/images/mandu.png' %}" style="width: 150px;">
          </div>
          <div class="d-flex justify-content-center py-2 text-right">
            <div class="p-1">
              <a href="https://www.twitter.com/whattheblin">
                <i class="fab fa-twitter" style="font-size: 2rem;"></i>
              </a>
            </div>
            <div class="p-1">
              <a href="https://www.instagram.com/theblinmachine">
                <i class="fab fa-instagram" style="font-size: 2rem;"></i>
              </a>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-6 text-center">
          <div>
          <img class="img-fluid rounded-circle" src="{% static 'blog/images/StephYellow.png' %}" style="width: 150px;">
          </div>
          <div class="d-flex justify-content-center py-2 text-left">
            <div class="p-1">
              <a href="https://www.instagram.com/labelle44">
                <i class="fab fa-instagram" style="font-size: 2rem;"></i>
              </a>
            </div>
          </div>
        </div>
        <div class="col-3 d-none d-md-block">
          <!-- empty spacing -->
        </div>
      </div>
    {% endif %}
  {% endif %}
</section>

<!-- Blog Cards -->
{% if LANGUAGE_CODE == 'en' %}
  <div class="container-fluid" style="width: 90%;">
    <div class="grid">
      <div class="grid-sizer col-xs col-md-6 col-lg-3"></div>
      {% for post in queryset %}
        <div class="grid-item col-xs col-md-6 col-lg-3">
          <a href="{% url 'post-detail' post.id %}" class="card stretched-link card-hover">
          <img src="{{ post.card_image.url }}" alt="" class="card-img-top">
          <span class="badge badge-pill notify-badge badge-light">{{ post.store_type.get }}</span>
          <div class="card-body">
            <h4 class="card-title">{{ post.title }}</h4>
            {% if post.overall_rating.get.rating == 1.0 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
            </span>
            {% elif post.overall_rating.get.rating == 1.5 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
            </span>
            {% elif post.overall_rating.get.rating == 2.0 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
            </span>
            {% elif post.overall_rating.get.rating == 2.5 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
            </span>
            {% elif post.overall_rating.get.rating == 3.0 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
            </span>
            {% elif post.overall_rating.get.rating == 3.5 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
            </span>
            {% elif post.overall_rating.get.rating == 4.0 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
            </span>
            {% elif post.overall_rating.get.rating == 4.5 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
            </span>
            {% elif post.overall_rating.get.rating == 5.0 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
            </span>
            {% endif %}
            <div>

            Price:
            {% if post.price_rating.get.name == "Cheap" %}
            <span>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign unfilled"></i>
              <i class="fas fa-ruble-sign unfilled"></i>
              <i class="fas fa-ruble-sign unfilled"></i>
            </span>
            {% elif post.price_rating.get.name == "Average" %}
            <span> 
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign unfilled"></i>
              <i class="fas fa-ruble-sign unfilled"></i>
            </span>
            {% elif post.price_rating.get.name == "Expensive" %}
            <span>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign unfilled"></i>
            </span>
            {% elif post.price_rating.get.name == "Very Expensive" %}
            <span>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign"></i>
            </span>
            {% endif %}
            <div></div>
            Nearest Station: <em>{{ post.nearest_station.get }}</em>
            </div>
            <div class="text-right pr-0">
              <i class="fas fa-comments"></i>
              <span>
                {{ post.comment_set.all.count }}
              </span>
            </div>
            <hr>
            <p class="card-text">{{ post.card_content }}</p>
            <hr>
            <footer class="blockquote-footer text-center">
              <cite title="Source Title">Posted on {{ post.date_posted|date:"m/d/Y" }}</cite>
            </footer>
          </div>
          </a>
        </div>
      {% endfor %}
    </div>
  </div>
{% endif %}

<!-- Russian Cards -->
{% if LANGUAGE_CODE == 'ru' %}
  <div class="container-fluid">
    <div class="grid">
      <div class="grid-sizer col-xs col-md-6 col-lg-3"></div>
      {% for post in queryset %}
        <div class="grid-item col-xs col-md-6 col-lg-3">
          <a href="{% url 'post-detail' post.id %}" class="card stretched-link card-hover">
          <img src="{{ post.card_image.url }}" alt="" class="card-img-top">
          <span class="badge badge-pill notify-badge badge-light">{{ post.store_type_russian.get }}</span>
          <div class="card-body">
            <h4 class="card-title">{{ post.title_russian }}</h4>
            {% if post.overall_rating.get.rating == 1.0 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
            </span>
            {% elif post.overall_rating.get.rating == 1.5 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
            </span>
            {% elif post.overall_rating.get.rating == 2.0 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
            </span>
            {% elif post.overall_rating.get.rating == 2.5 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
            </span>
            {% elif post.overall_rating.get.rating == 3.0 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
            </span>
            {% elif post.overall_rating.get.rating == 3.5 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
            </span>
            {% elif post.overall_rating.get.rating == 4.0 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
            </span>
            {% elif post.overall_rating.get.rating == 4.5 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
            </span>
            {% elif post.overall_rating.get.rating == 5.0 %}
            <span>Overall: 
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
            </span>
            {% endif %}
            <div>

            Price:
            {% if post.price_rating.get.name == "Cheap" %}
            <span>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign unfilled"></i>
              <i class="fas fa-ruble-sign unfilled"></i>
              <i class="fas fa-ruble-sign unfilled"></i>
            </span>
            {% elif post.price_rating.get.name == "Average" %}
            <span> 
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign unfilled"></i>
              <i class="fas fa-ruble-sign unfilled"></i>
            </span>
            {% elif post.price_rating.get.name == "Expensive" %}
            <span>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign unfilled"></i>
            </span>
            {% elif post.price_rating.get.name == "Very Expensive" %}
            <span>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign"></i>
              <i class="fas fa-ruble-sign"></i>
            </span>
            {% endif %}
            <div></div>
            Nearest Station: <em>{{ post.nearest_station_russian.get }}</em>
            </div>
            <div class="text-right pr-0">
              <i class="fas fa-comments"></i>
              <span>
                {{ post.comment_set.all.count }}
              </span>
            </div>
            <hr>
            <p class="card-text">{{ post.card_content }}</p>
            <hr>
            <footer class="blockquote-footer text-center">
              <cite title="Source Title">Posted on {{ post.date_posted|date:"m/d/Y" }}</cite>
            </footer>
          </div>
          </a>
        </div>
      {% endfor %}
    </div>
  </div>
{% endif %}

<section id="paginate-buttons" class="container text-center my-5">
  <div class="row">
    <div class="col">
      {% if queryset.paginator.num_pages > 1 %}
        <div class="container pb-5 d-inline-block">
          {% if queryset.has_previous and keyword_query == '' %}
            <a href="?page={{ queryset.previous_page_number }}&title=&store_type={{store_type_query}}&special_feature={{special_feature_query}}&nearest_station={{nearest_station_query}}&price_rating={{price_rating_query}}&overall_rating={{overall_rating_query}}" class="btn btn-sm btn-outline-dark"><i class="fas fa-angle-left"></i></a>
          {% endif %}

          {% if queryset.has_previous and keyword_query %}
            <a href="?page={{ queryset.previous_page_number }}&title={{keyword_query}}&store_type={{store_type_query}}&special_feature={{special_feature_query}}&nearest_station={{nearest_station_query}}&price_rating={{price_rating_query}}&overall_rating={{overall_rating_query}}" class="btn btn-sm btn-outline-dark"><i class="fas fa-angle-left"></i></a>
          {% endif %}

          {% if queryset.has_previous and store_type_query == None and special_feature_query == None and nearest_station_query == None and price_rating_query == None and overall_rating_query == None %}
            <a href="?page={{ queryset.previous_page_number }}" class="btn btn-sm btn-outline-dark"><i class="fas fa-angle-left"></i></a>
          {% endif %} 

          {% for num in queryset.paginator.page_range %}
            {% if queryset.number == num %}
              {% if queryset.paginator.num_pages != 1 %}
                <a class="btn btn-sm btn-dark" href="?page={{ num }}">{{ num }}</a>
              {% endif %}
            {% endif %}
          {% endfor %}

          {% if queryset.has_next and keyword_query == '' %}
            <a href="?page={{ queryset.next_page_number }}&title=&store_type={{store_type_query}}&special_feature={{special_feature_query}}&nearest_station={{nearest_station_query}}&price_rating={{price_rating_query}}&overall_rating={{overall_rating_query}}" class="btn btn-sm btn-outline-dark"><i class="fas fa-angle-right"></i></a>
          {% endif %}

          {% if queryset.has_next and keyword_query %}
            <a href="?page={{ queryset.next_page_number }}&title={{keyword_query}}&store_type={{store_type_query}}&special_feature={{special_feature_query}}&nearest_station={{nearest_station_query}}&price_rating={{price_rating_query}}&overall_rating={{overall_rating_query}}" class="btn btn-sm btn-outline-dark"><i class="fas fa-angle-right"></i></a>
          {% endif %}

          {% if queryset.has_next and store_type_query == None and special_feature_query == None and nearest_station_query == None and price_rating_query == None and overall_rating_query == None %}
            <a href="?page={{ queryset.next_page_number }}" class="btn btn-sm btn-outline-dark"><i class="fas fa-angle-right"></i></a>
          {% endif %} 
        </div>
      {% endif %}
    </div>
  </div>
</section>

<!-- Masonry Script -->
<script>
$('.grid').masonry({
  itemSelector: '.grid-item', // use a separate class for itemSelector, other than .col-
  columnWidth: '.grid-sizer',
  percentPosition: true,
});
</script>

{% endblock %}

